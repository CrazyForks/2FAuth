import{P as G,v as _,b as h,a2 as w,Z as y,K as I,h as N,j as C,f as o,k as d,l as M,m as S,d as V,I as E,e as i}from"./app-CsCdPRLz.js";import{F as k}from"./Form-BqPELsYX.js";import{u as x}from"./bus-Basus4b9.js";/*! 2FAuth version 6.0.0 - Copyright (c) 2025 Bubka - https://github.com/Bubka/2FAuth */const R={__name:"CreateUpdate",props:{groupId:[Number,String]},setup(l){const m=G(),s=M(),c=y(),u=x(),p=l,n=_(()=>p.groupId!=null),e=h(new k({name:""}));w(()=>{c.name=="editGroup"&&(u.editedGroupName?(e.name=u.editedGroupName,u.editedGroupName=void 0):I.get(p.groupId).then(t=>{e.name=t.data.name}))});function f(){n.value?b():g()}async function g(){e.post("/api/v1/groups").then(t=>{m.addOrEdit(t.data),s.push({name:"groups"})})}async function b(){e.put("/api/v1/groups/"+p.groupId).then(t=>{m.addOrEdit(t.data),s.push({name:"groups"})})}return(t,r)=>{const B=d("FormField"),v=d("FormButtons"),F=d("FormWrapper");return S(),N(F,{title:o(n)?"heading.rename_group":"heading.new_group"},{default:C(()=>[V("form",{onSubmit:E(f,["prevent"]),onKeydown:r[2]||(r[2]=a=>o(e).onKeydown(a))},[i(B,{modelValue:o(e).name,"onUpdate:modelValue":r[0]||(r[0]=a=>o(e).name=a),fieldName:"name",errorMessage:o(e).errors.get("name"),label:"field.name",autofocus:""},null,8,["modelValue","errorMessage"]),i(v,{submitId:o(n)?"btnEditGroup":"btnCreateGroup",isBusy:o(e).isBusy,submitLabel:o(n)?"label.save":"label.create",showCancelButton:!0,onCancel:r[1]||(r[1]=a=>o(s).push({name:"groups"}))},null,8,["submitId","isBusy","submitLabel"])],32)]),_:1},8,["title"])}}};export{R as default};
