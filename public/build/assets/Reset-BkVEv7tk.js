import{C as R,r as x,b as C,Z as v,a3 as N,h as a,j as c,k as r,l as M,m as n,d as P,e as d,f as s,I as h,i as u,g as L,t as E,x as q}from"./app-CsCdPRLz.js";import{F as D}from"./Form-BqPELsYX.js";/*! 2FAuth version 6.0.0 - Copyright (c) 2025 Bubka - https://github.com/Bubka/2FAuth */const U={__name:"Reset",setup(I){const f=R(),l=q(),w=M(),m=v(),i=x(!0),e=C(new D({email:m.query.email,password:"",password_confirmation:"",token:m.query.token}));function F(p){e.password_confirmation=e.password,e.post("/user/password/reset",{returnError:!0}).then(o=>{e.password="",e.password_confirmation="",i.value=!1,l.success({text:o.data.message,duration:-1})}).catch(o=>{o.response.data.resetFailed?l.alert({text:o.response.data.resetFailed,duration:-1}):o.response.status!==422&&f.show(o)})}return N(()=>{l.clear()}),(p,o)=>{const _=r("FormField"),g=r("FormPasswordField"),k=r("FormFieldError"),b=r("FormButtons"),y=r("RouterLink"),V=r("VueFooter"),B=r("FormWrapper");return n(),a(B,{title:"heading.new_password"},{default:c(()=>[P("form",{onSubmit:h(F,["prevent"]),onKeydown:o[3]||(o[3]=t=>s(e).onKeydown(t))},[d(_,{modelValue:s(e).email,"onUpdate:modelValue":o[0]||(o[0]=t=>s(e).email=t),isDisabled:!0,fieldName:"email",errorMessage:s(e).errors.get("email"),label:"field.email",autofocus:""},null,8,["modelValue","errorMessage"]),d(g,{modelValue:s(e).password,"onUpdate:modelValue":o[1]||(o[1]=t=>s(e).password=t),fieldName:"password",errorMessage:s(e).errors.get("password"),autocomplete:"new-password",showRules:!0,label:"field.new_password"},null,8,["modelValue","errorMessage"]),s(e).errors.get("token")!=null?(n(),a(k,{key:0,error:s(e).errors.get("token"),field:s(e).token},null,8,["error","field"])):u("",!0),s(i)?(n(),a(b,{key:1,submitId:"btnResetPwd",isBusy:s(e).isBusy,submitLabel:"label.change_password",showCancelButton:!0,onCancel:o[2]||(o[2]=t=>s(w).push({name:"login"}))},null,8,["isBusy"])):u("",!0),s(i)?u("",!0):(n(),a(y,{key:2,id:"btnContinue",to:{name:"accounts"},class:"button is-link"},{default:c(()=>[L(E(p.$t("link.continue")),1)]),_:1}))],32),d(V)]),_:1})}}};export{U as default};
