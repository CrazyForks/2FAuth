import{r as C,k as B,c as u,m as l,d as i,e as f,t as r,j as h,F as U,G as te,i as k,n as y,f as e,g as G,J as L,K as $e,L as ce,M as we,z as Me,l as se,u as he,h as O,N as ve,C as Ce,D as xe,O as Se,a as Oe,P as Ae,q as X,v as De,o as Ie,x as Ge,Q as Y,_ as Pe,E as F,R as Ee,I,S as Ue,T as Ve,U as R,y as ee,V as qe,w as K,W as pe,X as Be,A as fe,Y as Te}from"./app-CLj7mONa.js";import{U as j}from"./index-DHvNF7PZ.js";import{c as V}from"./createLucideIcon-DUteC7o6.js";import{u as ze}from"./bus-Bwv5YVcY.js";import{M as Ne,u as Re,m as Le}from"./useSortable-B7UA1Mg8.js";import{C as Fe}from"./circle-alert-HFzXV-Nx.js";import{Q as Ke}from"./qr-code-BMxpl-P2.js";/*! 2FAuth version 6.0.0 - Copyright (c) 2025 Bubka - https://github.com/Bubka/2FAuth *//**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=V("arrow-down-a-z",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=V("arrow-up-a-z",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=V("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=V("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=V("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=V("scan-qr-code",[["path",{d:"M17 12v4a1 1 0 0 1-1 1h-4",key:"uk4fdo"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M17 8V7",key:"q2g9wo"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M7 17h.01",key:"19xn7k"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["rect",{x:"7",y:"7",width:"5",height:"5",rx:"1",key:"m9kyts"}]]);/**
 * @license lucide-vue-next v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=V("square-check",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ye={class:"container group-selector"},et={class:"columns is-centered is-multiline"},tt={class:"column is-full has-text-centered"},st={class:"column is-one-third-tablet is-one-quarter-desktop is-one-quarter-widescreen is-one-quarter-fullhd"},ot={class:"columns is-multiline"},nt=["onClick"],it={class:"column has-text-centered"},at={class:"column is-full"},lt={class:"columns is-centered"},rt={class:"column has-text-centered"},dt={class:"control"},ut={__name:"DestinationGroupSelector",props:{showDestinationGroupSelector:Boolean,selectedAccountsIds:Array,groups:Array},emits:["update:showDestinationGroupSelector","accounts-moved"],setup(m,{emit:P}){const b=m,p=C(null),w=P;async function d(){p.value===0?await L.withdraw(b.selectedAccountsIds):await $e.assign(b.selectedAccountsIds,p.value,{returnError:!0}),w("accounts-moved")}return(o,c)=>{const E=B("RouterLink"),Q=B("NavigationButton"),a=B("VueFooter");return l(),u("div",Ye,[i("div",et,[i("div",tt,r(o.$t("message.move_selected_to")),1),i("div",st,[i("div",ot,[f(e(j),null,{default:h(({mode:A})=>[(l(!0),u(U,null,te(m.groups,M=>(l(),u("div",{class:"column is-full",key:M.id},[M.id>0?(l(),u("button",{key:0,type:"button",class:y(["button is-fullwidth",{"is-link":e(p)===M.id,"is-dark has-text-light is-outlined":A=="dark"}]),onClick:T=>p.value=M.id},r(M.name),11,nt)):k("",!0)]))),128)),i("div",it,r(o.$t("message.or")),1),i("div",at,[i("button",{type:"button",class:y(["button is-fullwidth",{"is-link":e(p)===0,"is-dark has-text-light is-outlined":A=="dark"}]),onClick:c[0]||(c[0]=M=>p.value=0)},r(o.$t("label.remove_from_group")),3)])]),_:1})]),i("div",lt,[i("div",rt,[f(E,{to:{name:"groups"}},{default:h(()=>[G(r(o.$t("link.manage_groups")),1)]),_:1})])])])]),f(a,null,{default:h(()=>[i("p",dt,[i("button",{type:"button",class:"button is-link is-rounded",onClick:d},r(o.$t("label.apply")),1)]),f(Q,{action:"cancel",useLinkTag:!1,onCanceled:c[1]||(c[1]=A=>o.$emit("update:showDestinationGroupSelector",!1))})]),_:1})])}}},ct={class:"toolbar has-text-centered"},pt={class:"columns"},ft={class:"column has-nowrap px-0"},mt={style:{"vertical-align":"sub"},class:"has-text-grey"},ht=["title"],vt=["title"],kt=["title"],yt=["title"],bt={__name:"Toolbar",props:ce({selectedCount:Number},{sortOrder:{},sortOrderModifiers:{}}),emits:ce(["sort-asc","sort-desc"],["update:sortOrder"]),setup(m,{emit:P}){const b=we(m,"sortOrder"),p=P;function w(d){b.value=d,p("sort-"+d)}return(d,o)=>(l(),u("div",ct,[i("div",pt,[i("div",ft,[i("span",mt,r(d.$t("message.x_selected",{count:m.selectedCount})),1),i("button",{style:Me([{"vertical-align":"middle"},{visibility:m.selectedCount>0?"visible":"hidden"}]),type:"button",id:"btnUnselectAll",onClick:o[0]||(o[0]=c=>d.$emit("clear-selected")),class:"clear-selection delete mr-4 ml-1",title:d.$t("tooltip.clear_selection")},null,12,ht),i("button",{type:"button",id:"btnSelectAll",onClick:o[1]||(o[1]=c=>d.$emit("select-all")),class:"button py-0 px-1 mr-5 has-line-height is-ghost has-text-grey pt-1",title:d.$t("tooltip.select_all")},[i("span",null,r(d.$t("label.check_all")),1),f(e(Xe),{class:"ml-1"})],8,vt),i("button",{type:"button",id:"btnSortAscending",onClick:o[2]||(o[2]=c=>w("asc")),class:y([{"has-text-grey":b.value!="asc"},"button has-line-height p-0 is-ghost pt-1"]),title:d.$t("tooltip.sort_ascending")},[f(e(je))],10,kt),i("button",{type:"button",id:"btnSortDescending",onClick:o[3]||(o[3]=c=>w("desc")),class:y([{"has-text-grey":b.value!="desc"},"button has-line-height p-0 pl-2 is-ghost pt-1"]),title:d.$t("tooltip.sort_descending")},[f(e(Qe))],10,yt)])])]))}},gt={key:0,class:"control"},_t={class:"icon is-small"},$t={key:1,class:"control"},wt={key:2,class:"control"},Mt=["disabled","title"],Ct={key:3,class:"control"},xt=["disabled"],St={key:4,class:"control"},Ot=["disabled","title"],me={__name:"ActionButtons",props:{inManagementMode:{type:Boolean,default:!1},areDisabled:{type:Boolean,default:!1}},emits:["update:inManagementMode","move-button-clicked","delete-button-clicked","export-button-clicked"],setup(m,{emit:P}){const b=se(),p=he();function w(){p.preferences.useDirectCapture&&p.preferences.defaultCaptureMode==="advancedForm"?b.push({name:"createAccount"}):p.preferences.useDirectCapture&&p.preferences.defaultCaptureMode==="livescan"?b.push({name:"capture"}):b.push({name:"start"})}return(d,o)=>(l(),O(e(j),null,{default:h(({mode:c})=>[m.inManagementMode?k("",!0):(l(),u("p",gt,[i("button",{type:"button",class:"button is-link is-rounded is-focus",onClick:w},[i("span",null,r(d.$t("label.new")),1),i("span",_t,[f(e(Je))])])])),m.inManagementMode?k("",!0):(l(),u("p",$t,[i("button",{type:"button",id:"btnManage",class:y(["button is-rounded",{"is-dark":c=="dark"}]),onClick:o[0]||(o[0]=E=>d.$emit("update:inManagementMode",!0))},r(d.$t("label.manage")),3)])),m.inManagementMode?(l(),u("p",wt,[i("button",{id:"btnMove",disabled:m.areDisabled,class:y(["button is-rounded",[{"is-outlined":c=="dark"||m.areDisabled},m.areDisabled?"is-dark":"is-link"]]),onClick:o[1]||(o[1]=E=>d.$emit("move-button-clicked")),title:d.$t("tooltip.move_selected_to_group")},r(d.$t("label.move")),11,Mt)])):k("",!0),m.inManagementMode?(l(),u("p",Ct,[i("button",{id:"btnDelete",disabled:m.areDisabled,class:y(["button is-rounded",[{"is-outlined":c=="dark"||m.areDisabled},m.areDisabled?"is-dark":"is-link"]]),onClick:o[2]||(o[2]=E=>d.$emit("delete-button-clicked"))},r(d.$t("label.delete")),11,xt)])):k("",!0),m.inManagementMode?(l(),u("p",St,[i("button",{id:"btnExport",disabled:m.areDisabled,class:y(["button is-rounded",[{"is-outlined":c=="dark"||m.areDisabled},m.areDisabled?"is-dark":"is-link"]]),onClick:o[3]||(o[3]=E=>d.$emit("export-button-clicked")),title:d.$t("tooltip.export_selected_accounts")},r(d.$t("label.export")),11,Ot)])):k("",!0)]),_:1}))}},At={class:"block"},Dt={class:"has-text-weight-bold has-text-grey"},It={class:"is-size-7-mobile"},Gt=["href"],Pt=["title"],Et={class:"block"},Ut={class:"has-text-weight-bold has-text-grey"},Vt={class:"is-size-7-mobile"},qt=["title"],Bt={__name:"ExportButtons",emits:["export-twofauth-format","export-otpauth-format"],setup(m,{emit:P}){se();const b=ve("2fauth");return(p,w)=>(l(),u(U,null,[i("div",At,[f(e(j),null,{default:h(({mode:d})=>[i("p",Dt,r(p.$t("message.twofauth_export_format_sub")),1)]),_:1}),i("p",It,[G(r(p.$t("message.twofauth_export_format_desc"))+" "+r(p.$t("message.twofauth_export_format_url"))+" ",1),i("a",{id:"lnkExportSchemaUrl",class:"is-link",tabindex:"0",href:e(b).urls.exportSchemaUrl,target:"_blank"},r(p.$t("link.twofauth_export_schema")),9,Gt)]),i("button",{type:"button",id:"btnExport2FAuth",class:"button is-link is-rounded is-focus my-3",onClick:w[0]||(w[0]=d=>p.$emit("export-twofauth-format")),title:p.$t("tooltip.twofauth_export_format_sub")},r(p.$t("label.twofauth_export_format")),9,Pt)]),i("div",Et,[i("p",Ut,r(p.$t("message.otpauth_export_format_sub")),1),i("p",Vt,r(p.$t("message.otpauth_export_format_desc")),1),i("button",{type:"button",id:"btnExportOtpauth",class:"button is-link is-rounded is-focus my-3",onClick:w[1]||(w[1]=d=>p.$emit("export-otpauth-format")),title:p.$t("tooltip.otpauth_export_format_sub")},r(p.$t("label.otpauth_export_format")),9,qt)])],64))}},Tt={key:2,class:"header"},zt={class:"columns is-gapless is-mobile is-centered"},Nt={class:"column is-three-quarters-mobile is-one-third-tablet is-one-quarter-desktop is-one-quarter-widescreen is-one-quarter-fullhd"},Rt={key:1,class:"has-text-centered"},Lt={class:"columns"},Ft={key:0,class:"column"},Kt=["title"],jt={key:1,class:"column"},Qt=["title"],Ht={key:3},Wt={class:"accounts"},Zt={class:"tfa-container"},Jt={key:0,class:"tfa-cell tfa-checkbox"},Xt={class:"field"},Yt=["id","value","name"],es=["for","onKeypress"],ts=["onClick","onKeyup"],ss={class:"tfa-text has-ellipsis"},os=["src"],ns=["src"],is={class:"is-block has-ellipsis is-family-primary is-size-6 is-size-7-mobile has-text-grey"},as={class:"has-text-right"},ls={key:0},rs=["onClick","onKeyup","title"],ds={class:"has-nowrap",style:{"line-height":"0.9"}},us=["onClick","onKeyup","title"],cs={key:1},ps=["onClick","title"],fs={class:"has-text-right"},ms=["onClick"],hs={key:0,class:"tfa-cell tfa-edit has-text-grey"},vs={key:0,class:"drag-handle tfa-cell tfa-dots has-text-grey"},Ms={__name:"Accounts",setup(m){const P=Ce(),{t:b}=xe(),p=ve("2fauth"),w=se(),d=Ge(),o=he(),c=ze(),{copy:E,copied:Q}=Se({legacy:!0}),a=Oe(),A=Ae(),M=C(!1),T=C(!1),x=C(!1),D=C(!1);C(!1);const H=C(null),z=C(null),oe=C({}),W=C(null),N=C({otp_type:"",account:"",service:"",icon:"",secret:"",digits:null,algorithm:"",period:null,counter:null,image:""}),ne=C([]),Z=C([]);X(M,n=>{var s;n==!1&&((s=W.value)==null||s.clearOTP())}),X(()=>a.items,n=>{c.inManagementMode&&ae()}),X(()=>c.inManagementMode,n=>{n&&ae()});const ie=De(()=>!a.isEmpty&&!x.value&&!D.value);Ie(async()=>{o.preferences.getOtpOnRequest?a.fetch().then(()=>{a.backendWasNewer&&d.info({text:b("notification.data_refreshed_to_reflect_server_changes"),duration:1e4})}):de(),A.fetch()});function ae(){Re("#dv",a.filtered,{animation:200,handle:".drag-handle",onUpdate:n=>{const s=a.filtered[n.oldIndex].id,_=a.items.findIndex($=>$.id==s);Le(a.items,_,n.newIndex),Y(()=>{a.saveOrder("free")})}})}function ke(){a.fetch(),a.selectNone(),D.value=!1,d.success({text:b("notification.accounts_moved")})}function le(n){N.value.otp_type=n.otp_type,N.value.service=n.service,N.value.account=n.account,N.value.icon=n.icon,Y().then(()=>{M.value=!0,W.value.show(n.id)})}function re(n){c.inManagementMode?a.select(n.id):!o.preferences.getOtpOnRequest&&n.otp_type.includes("totp")?q(n.otp.password):le(n)}function q(n){E(n),Q&&(o.preferences.kickUserAfter==-1&&o.logout({kicked:!0}),o.preferences.clearSearchOnCopy&&(a.filter=""),o.preferences.viewDefaultGroupOnCopy&&(o.preferences.activeGroup=o.preferences.defaultGroup==-1?o.preferences.activeGroup:o.preferences.defaultGroup),d.success({text:b("notification.copied_to_clipboard")}))}async function ye(n){L.getOtpById(n.id).then(s=>{let _=s.data;if(q(_.password),_.otp_type=="hotp"){let $=a.items.find(S=>S.id==n.id);$!=null&&($.counter=_.counter)}})}function J(n,s){Z.value.filter(_=>_.props.period==n||n==null).forEach(_=>{_.turnOn(s)}),oe.value[n]="is-opacity-"+s}function be(n){Z.value.filter(s=>s.props.period==n||n==null).forEach(s=>{s.turnOff()})}async function de(n){let s;n==null?(H.value=-1,s=L.getAll(!0)):(H.value=n,s=L.getByIds(a.accountIdsWithPeriod(n).join(","),!0)),be(n);const _=a.items.filter($=>$.otp_type.includes("totp")&&$.period==n&&$.otp.next_password);_.length>0&&(_.forEach($=>{const S=a.items.findIndex(g=>g.id===$.id);a.items[S].otp.next_password&&(a.items[S].otp.password=a.items[S].otp.next_password)}),J(n,0)),s.then($=>{let S=0;$.data.forEach(g=>{if(g.otp_type.includes("totp")){const t=a.items.findIndex(v=>v.id===g.id);a.items[t]==null?a.items.push(g):a.items[t].otp=g.otp,S=g.otp.generated_at}}),ne.value.forEach(g=>{(g.props.period==n||n==null)&&Y().then(()=>{g.startStepping(S)})})}).finally(()=>{H.value=null})}async function ge(){await a.deleteSelected(),a.isEmpty&&(c.inManagementMode=!1,w.push({name:"start"}))}function _e(){c.inManagementMode=!1,a.selectNone()}function ue(n){a.groupLessOnly=!1,o.preferences.activeGroup!=n&&(o.preferences.activeGroup=n),o.preferences.rememberActiveGroup&&Te.updatePreference("activeGroup",o.preferences.activeGroup)}return(n,s)=>{const _=B("RouterLink"),$=B("Modal"),S=B("VueFooter");return l(),O(e(j),null,{default:h(({mode:g})=>[i("div",null,[e(x)?(l(),O(e(Pe),{key:0,"is-visible":e(x),"onUpdate:isVisible":s[0]||(s[0]=t=>F(x)?x.value=t:null),"active-group":e(o).preferences.activeGroup,"onUpdate:activeGroup":s[1]||(s[1]=t=>e(o).preferences.activeGroup=t),groups:e(A).items,onActiveGroupChanged:ue,onShowGroupLess:s[2]||(s[2]=t=>e(a).groupLessOnly=!0)},{default:h(()=>[f(_,{to:{name:"groups"}},{default:h(()=>[G(r(n.$t("link.manage_groups")),1)]),_:1})]),_:1},8,["is-visible","active-group","groups"])):k("",!0),e(D)?(l(),O(ut,{key:1,showDestinationGroupSelector:e(D),"onUpdate:showDestinationGroupSelector":s[3]||(s[3]=t=>F(D)?D.value=t:null),selectedAccountsIds:e(a).selectedIds,"onUpdate:selectedAccountsIds":s[4]||(s[4]=t=>e(a).selectedIds=t),groups:e(A).items,onAccountsMoved:ke},null,8,["showDestinationGroupSelector","selectedAccountsIds","groups"])):k("",!0),e(ie)||e(x)?(l(),u("div",Tt,[i("div",zt,[i("div",Nt,[f(e(Ee),{keyword:e(a).filter,"onUpdate:keyword":s[5]||(s[5]=t=>e(a).filter=t)},null,8,["keyword"]),e(c).inManagementMode?(l(),O(bt,{key:0,sortOrder:e(o).preferences.sortOrder,"onUpdate:sortOrder":s[6]||(s[6]=t=>e(o).preferences.sortOrder=t),selectedCount:e(a).selectedCount,onClearSelected:s[7]||(s[7]=t=>e(a).selectNone()),onSelectAll:s[8]||(s[8]=t=>e(a).selectAll()),onSortAsc:s[9]||(s[9]=t=>e(a).sortAsc()),onSortDesc:s[10]||(s[10]=t=>e(a).sortDesc())},null,8,["sortOrder","selectedCount"])):(l(),u("div",Rt,[i("div",Lt,[e(x)?(l(),u("div",Ft,[i("button",{type:"button",id:"btnHideGroupSwitch",title:n.$t("tooltip.hide_group_selector"),tabindex:"1",class:y(["button is-text is-like-text",{"has-text-grey":g!="dark"}]),onClick:s[11]||(s[11]=I(t=>x.value=!e(x),["stop"]))},r(n.$t("label.select_accounts_to_show")),11,Kt)])):(l(),u("div",jt,[i("button",{type:"button",id:"btnShowGroupSwitch",title:n.$t("tooltip.show_group_selector"),tabindex:"1",class:y(["button is-text is-like-text",{"has-text-grey":g!="dark"}]),onClick:s[12]||(s[12]=I(t=>x.value=!e(x),["stop"]))},[e(A).current?(l(),u(U,{key:0},[G(r(e(A).current)+" ("+r(e(a).filteredCount)+")  ",1)],64)):e(a).groupLessOnly?(l(),u(U,{key:1},[G(r(n.$t("label.group_less"))+" ("+r(e(a).filteredCount)+")  ",1)],64)):(l(),u(U,{key:2},[G(r(n.$t("label.all"))+" ("+r(e(a).filteredCount)+")  ",1)],64)),f(e(He),{class:"mt-1"})],10,Qt)]))])]))])])])):k("",!0),f($,{modelValue:e(T),"onUpdate:modelValue":s[15]||(s[15]=t=>F(T)?T.value=t:null),isFullHeight:!0},{default:h(()=>[f(Bt,{onExportTwofauthFormat:s[13]||(s[13]=t=>e(a).export()),onExportOtpauthFormat:s[14]||(s[14]=t=>e(a).export("otpauth"))})]),_:1},8,["modelValue"]),f($,{modelValue:e(M),"onUpdate:modelValue":s[21]||(s[21]=t=>F(M)?M.value=t:null)},{default:h(()=>[f(e(Ue),{ref_key:"otpDisplay",ref:W,accountParams:e(N),preferences:e(o).preferences,twofaccountService:e(L),iconPathPrefix:e(p).config.subdirectory,onPleaseCloseMe:s[16]||(s[16]=t=>M.value=!1),onPleaseClearSearch:s[17]||(s[17]=t=>e(a).filter=""),onKickme:s[18]||(s[18]=t=>e(o).logout({kicked:!0})),onPleaseUpdateActiveGroup:ue,onOtpCopiedToClipboard:s[19]||(s[19]=t=>e(d).success({text:e(b)("notification.copied_to_clipboard")})),onError:s[20]||(s[20]=t=>e(P).show(t))},null,8,["accountParams","preferences","twofaccountService","iconPathPrefix"])]),_:1},8,["modelValue"]),e(o).preferences.getOtpOnRequest?k("",!0):(l(),u("span",Ht,[(l(!0),u(U,null,te(e(a).periods,t=>(l(),O(e(Ve),{ref_for:!0,ref_key:"dotsControllers",ref:ne,key:t.period,autostart:!1,period:t.period,generated_at:t.generated_at,onSteppingEnded:v=>de(t.period),onSteppingStarted:v=>J(t.period,v),onSteppedUp:v=>J(t.period,v)},null,8,["period","generated_at","onSteppingEnded","onSteppingStarted","onSteppedUp"]))),128))])),e(ie)?(l(),u("div",{key:4,class:y(["container",e(c).inManagementMode?"is-edit-mode":""])},[i("div",Wt,[i("span",{id:"dv",class:y(["columns is-multiline",{"is-centered":e(o).preferences.displayMode==="grid"}])},[(l(!0),u(U,null,te(e(a).filtered,t=>(l(),u("div",{class:y([[e(o).preferences.displayMode==="grid"?"tfa-grid":"tfa-list"],"column is-narrow"]),key:t.id},[i("div",Zt,[f(R,{name:"slideCheckbox"},{default:h(()=>[e(c).inManagementMode?(l(),u("div",Jt,[i("div",Xt,[ee(i("input",{class:y(["is-checkradio is-small",g=="dark"?"is-white":"is-info"]),id:"ckb_"+t.id,value:t.id,type:"checkbox",name:"ckb_"+t.id,"onUpdate:modelValue":s[22]||(s[22]=v=>e(a).selectedIds=v)},null,10,Yt),[[qe,e(a).selectedIds]]),i("label",{tabindex:"0",for:"ckb_"+t.id,onKeypress:K(I(v=>e(a).select(t.id),["prevent"]),["space"])},null,40,es)])])):k("",!0)]),_:2},1024),i("div",{tabindex:"0",class:"tfa-cell tfa-content is-size-3 is-size-4-mobile",onClick:[I(v=>re(t),["exact"]),I(v=>ye(t),["ctrl"])],onKeyup:K(v=>re(t),["enter"]),role:"button"},[i("div",ss,[t.icon&&e(o).preferences.showAccountsIcons?(l(),u("img",{key:0,role:"presentation",class:"tfa-icon",src:e(p).config.subdirectory+"/storage/icons/"+t.icon,alt:""},null,8,os)):t.icon==null&&e(o).preferences.showAccountsIcons?(l(),u("img",{key:1,role:"presentation",class:"tfa-icon",src:e(p).config.subdirectory+"/storage/noicon.svg",alt:""},null,8,ns)):k("",!0),G(" "+r(t.service?t.service:n.$t("message.no_service")),1),t.account===n.$t("error.indecipherable")?(l(),O(e(Fe),{key:2,class:"has-text-danger ml-2"})):k("",!0),i("span",is,r(t.account),1)])],40,ts),f(R,{name:"popLater"},{default:h(()=>[ee(i("div",as,[t.otp!=null?(l(),u("div",ls,[i("div",{class:"always-on-otp is-clickable has-nowrap has-text-grey is-size-5 ml-4",onClick:v=>q(t.otp.password),onKeyup:K(v=>q(t.otp.password),["enter"]),title:n.$t("tooltip.copy_to_clipboard")},r(e(pe)(t.otp.password,e(o).preferences.formatPassword,e(o).preferences.formatPasswordBy,e(o).preferences.showOtpAsDot,e(o).preferences.revealDottedOTP&&e(z)==t.id)),41,rs),i("div",ds,[e(o).preferences.showNextOtp?(l(),u("span",{key:0,class:y(["always-on-otp is-clickable has-nowrap has-text-grey is-size-7 mr-2",e(oe)[t.period]]),onClick:v=>q(t.otp.next_password),onKeyup:K(v=>q(t.otp.next_password),["enter"]),title:n.$t("tooltip.copy_next_password")},r(e(pe)(t.otp.next_password,e(o).preferences.formatPassword,e(o).preferences.formatPasswordBy,e(o).preferences.showOtpAsDot,e(o).preferences.revealDottedOTP&&e(z)==t.id)),43,us)):k("",!0),t.otp_type.includes("totp")?(l(),O(e(Be),{key:1,ref_for:!0,ref_key:"dotsRefs",ref:Z,class:y("is-inline-block"),isCondensed:!0,period:t.period},null,8,["period"])):k("",!0)])])):(l(),u("div",cs,[i("button",{type:"button",class:y(["button tag",g=="dark"?"is-dark":"is-white"]),onClick:v=>le(t),title:n.$t("tooltip.import_this_account")},r(n.$t("label.generate")),11,ps)]))],512),[[fe,e(o).preferences.getOtpOnRequest==!1&&!e(c).inManagementMode]])]),_:2},1024),e(o).preferences.showOtpAsDot&&e(o).preferences.revealDottedOTP?(l(),O(R,{key:0,name:"popLater"},{default:h(()=>[ee(i("div",fs,[e(z)==t.id?(l(),u("button",{key:0,type:"button",class:"pr-0 button is-ghost has-text-grey-dark",onClick:s[23]||(s[23]=I(v=>z.value=null,["stop"]))},[f(e(Ze))])):(l(),u("button",{key:1,type:"button",class:"pr-0 button is-ghost has-text-grey-dark",onClick:I(v=>z.value=t.id,["stop"])},[f(e(We))],8,ms))],512),[[fe,e(o).preferences.getOtpOnRequest==!1&&!e(c).inManagementMode]])]),_:2},1024)):k("",!0),f(R,{name:"fadeInOut"},{default:h(()=>[e(c).inManagementMode?(l(),u("div",hs,[f(_,{to:{name:"editAccount",params:{twofaccountId:t.id}},class:y(["tag is-rounded mr-1",g=="dark"?"is-dark":"is-white"])},{default:h(()=>[G(r(n.$t("link.edit")),1)]),_:1},8,["to","class"]),f(_,{to:{name:"showQRcode",params:{twofaccountId:t.id}},class:y(["tag is-rounded",g=="dark"?"is-dark":"is-white"]),title:n.$t("tooltip.show_qrcode")},{default:h(()=>[f(e(Ke),{class:"icon-size-1"})]),_:1},8,["to","class","title"])])):k("",!0)]),_:2},1024),f(R,{name:"fadeInOut"},{default:h(()=>[e(c).inManagementMode?(l(),u("div",vs,[f(e(Ne))])):k("",!0)]),_:1})])],2))),128))],2)]),e(c).inManagementMode&&!e(D)?(l(),O(S,{key:0},{default:h(()=>[f(me,{inManagementMode:e(c).inManagementMode,"onUpdate:inManagementMode":s[24]||(s[24]=t=>e(c).inManagementMode=t),areDisabled:e(a).hasNoneSelected,onMoveButtonClicked:s[25]||(s[25]=t=>D.value=!0),onDeleteButtonClicked:ge,onExportButtonClicked:s[26]||(s[26]=t=>T.value=!0)},null,8,["inManagementMode","areDisabled"])]),subpart:h(()=>[i("button",{type:"button",id:"lnkExitEdit",class:"button is-ghost is-like-text",onClick:I(_e,["stop"])},r(n.$t("label.done")),1)]),_:1})):(l(),O(S,{key:1},{default:h(()=>[f(me,{inManagementMode:e(c).inManagementMode,"onUpdate:inManagementMode":s[27]||(s[27]=t=>e(c).inManagementMode=t)},null,8,["inManagementMode"])]),_:1}))],2)):k("",!0)])]),_:1})}}};export{Ms as default};
