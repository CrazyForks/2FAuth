import{u as L,a as N,r as g,b as V,o as A,c as d,d as t,e as k,n as E,f as s,g as a,t as n,h as $,i as b,w as C,j as _,k as p,l as R,x as S,m as r}from"./app-CsCdPRLz.js";import{F as U}from"./Form-BqPELsYX.js";import{u as K}from"./bus-Basus4b9.js";/*! 2FAuth version 6.0.0 - Copyright (c) 2025 Bubka - https://github.com/Bubka/2FAuth */const Q={class:"container has-text-centered"},D={class:"columns quick-uploader"},M={class:"column is-full quick-uploader-button"},T={class:"quick-uploader-centerer"},j={class:"column is-full"},z={class:"block light-or-darker"},G={key:0,class:"block has-text-link"},H={class:"block has-text-link"},J={class:"block has-text-link"},Y={__name:"Start",setup(O){const u=R(),c=L(),v=K(),B=S(),h=N(),m=g(null),i=g(null),l=V(new U({qrcode:null,inputFormat:"fileUpload"}));function q(){l.clear(),l.qrcode=m.value.files[0],l.upload("/api/v1/qrcode/decode",{returnError:!0}).then(e=>{e.data.data.slice(0,33).toLowerCase()==="otpauth-migration://offline?data="?(v.migrationUri=e.data.data,u.push({name:"importAccounts"})):(v.decodedUri=e.data.data,u.push({name:"createAccount"}))}).catch(e=>{e.response.status!==422&&B.alert({text:e.response.data.message})})}function F(){u.push({name:"capture"})}return A(()=>{c.preferences.useDirectCapture&&c.preferences.defaultCaptureMode==="upload"&&i.value.click()}),(e,o)=>{const w=p("FormFieldError"),y=p("RouterLink"),I=p("NavigationButton"),x=p("VueFooter");return r(),d("div",Q,[t("div",D,[t("div",{class:E(["column is-full quick-uploader-header",{"is-invisible":s(h).count!==0}])},[a(n(e.$t("message.no_account_here")),1),o[4]||(o[4]=t("br",null,null,-1)),a(" "+n(e.$t("message.add_first_account")),1)],2),t("div",M,[t("div",T,[s(c).preferences.useBasicQrcodeReader?(r(),d("label",{key:0,role:"button",tabindex:"0",class:"button is-link is-medium is-rounded is-main",ref_key:"qrcodeInputLabel",ref:i,onKeyup:o[0]||(o[0]=C(f=>s(i).click(),["enter"]))},[t("input",{"aria-hidden":"true",tabindex:"-1",class:"file-input",type:"file",accept:"image/*",onChange:q,ref_key:"qrcodeInput",ref:m},null,544),a(" "+n(e.$t("label.upload_qrcode")),1)],544)):(r(),d("button",{key:1,type:"button",class:"button is-link is-medium is-rounded is-main",onClick:o[1]||(o[1]=f=>F())},n(e.$t("label.scan_qrcode")),1))]),s(l).errors.hasAny("qrcode")?(r(),$(w,{key:0,error:s(l).errors.get("qrcode"),field:"qrcode"},null,8,["error"])):b("",!0)]),t("div",j,[t("div",z,n(e.$t("message.alternative_methods")),1),s(c).preferences.useBasicQrcodeReader?b("",!0):(r(),d("div",G,[t("label",{role:"button",tabindex:"0",class:"button is-link is-outlined is-rounded",ref_key:"qrcodeInputLabel",ref:i,onKeyup:o[2]||(o[2]=C(f=>s(i).click(),["enter"]))},[t("input",{"aria-hidden":"true",tabindex:"-1",class:"file-input",type:"file",accept:"image/*",onChange:q,ref_key:"qrcodeInput",ref:m},null,544),a(" "+n(e.$t("label.upload_qrcode")),1)],544)])),t("div",H,[k(y,{class:"button is-link is-outlined is-rounded",to:{name:"createAccount"}},{default:_(()=>[a(n(e.$t("link.use_advanced_form")),1)]),_:1})]),t("div",J,[k(y,{id:"btnImport",class:"button is-link is-outlined is-rounded",to:{name:"importAccounts"}},{default:_(()=>[a(n(e.$t("label.import")),1)]),_:1})])])]),k(x,null,{default:_(()=>[s(h).isEmpty?b("",!0):(r(),$(I,{key:0,action:"back",onGoback:o[3]||(o[3]=f=>s(u).push({name:"accounts"})),"previous-page-title":e.$t("title.accounts")},null,8,["previous-page-title"]))]),_:1})])}}};export{Y as default};
