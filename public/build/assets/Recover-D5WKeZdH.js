import{C as B,D as R,a9 as x,N as C,b as N,Z as D,a3 as $,h as q,j as c,k as a,l as A,m as L,d as u,e as r,f as s,I as W,g as p,t as m,x as I}from"./app-CsCdPRLz.js";import{F as M}from"./Form-BqPELsYX.js";/*! 2FAuth version 6.0.0 - Copyright (c) 2025 Bubka - https://github.com/Bubka/2FAuth */const P={class:"field"},U={__name:"Recover",setup(S){const f=B(),{t:_}=R(),w=C("2fauth"),n=I(),i=A(),d=D(),b=x(w.prefix+"showWebauthnForm",!1),o=N(new M({email:d.query.email,password:"",token:d.query.token,revokeAll:!1}));function h(l){n.clear(),o.post("/webauthn/recover",{returnError:!0}).then(e=>{b.value=!1,i.push({name:"login"})}).catch(e=>{e.response.status===401?n.alert({text:_("notification.authentication_failed"),duration:-1}):e.response.status===422?n.alert({text:e.response.data.message,duration:-1}):f.show(e)})}return $(()=>{n.clear()}),(l,e)=>{const v=a("FormCheckbox"),k=a("FormPasswordField"),F=a("RouterLink"),y=a("FormButtons"),g=a("VueFooter"),V=a("FormWrapper");return L(),q(V,{title:"heading.account_recovery",punchline:"message.recover_account_instructions"},{default:c(()=>[u("div",null,[u("form",{onSubmit:W(h,["prevent"]),onKeydown:e[3]||(e[3]=t=>s(o).onKeydown(t))},[r(v,{modelValue:s(o).revokeAll,"onUpdate:modelValue":e[0]||(e[0]=t=>s(o).revokeAll=t),fieldName:"revokeAll",label:"field.disable_all_security_devices",help:"field.disable_all_security_devices.help"},null,8,["modelValue"]),r(k,{modelValue:s(o).password,"onUpdate:modelValue":e[1]||(e[1]=t=>s(o).password=t),fieldName:"password",errorMessage:s(o).errors.get("password"),autocomplete:"current-password",showRules:!1,label:"field.current_password",help:"field.current_password.help"},null,8,["modelValue","errorMessage"]),u("div",P,[u("p",null,[p(m(l.$t("message.forgot_your_password"))+"Â  ",1),r(F,{id:"lnkResetPwd",to:{name:"password.request"},class:"is-link","aria-label":l.$t("label.reset_your_password")},{default:c(()=>[p(m(l.$t("link.request_password_reset")),1)]),_:1},8,["aria-label"])])]),r(y,{submitId:"btnRecover",isBusy:s(o).isBusy,isDisabled:s(o).isDisabled,submitLabel:"label.continue",showCancelButton:!0,onCancel:e[2]||(e[2]=t=>s(i).push({name:"login"}))},null,8,["isBusy","isDisabled"])],32)]),r(g)]),_:1})}}};export{U as default};
